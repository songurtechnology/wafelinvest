{% load static %}
<!DOCTYPE html>
<html lang="tr" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Language" content="tr" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="WafelInvest Team" />
  <meta name="theme-color" content="#0d6efd" />

  <title>{% block title %}WafelInvest - Akıllı Stroopwafel Yatırımı{% endblock %}</title>
  <meta name="description" content="{% block meta_description %}WafelInvest - Stroopwafel ile Akıllı ve Güvenilir Yatırım Platformu{% endblock %}" />
  <meta name="keywords" content="Stroopwafel, Yatırım, WafelInvest, Güvenilir Yatırım, Pasif Gelir, Hollanda Yatırımı" />

  <link rel="canonical" href="{% block canonical_url %}{{ request.build_absolute_uri|slice:":-1" }}{% endblock %}" />
  <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="tr_TR" />
  <meta property="og:title" content="{% block og_title %}WafelInvest{% endblock %}" />
  <meta property="og:description" content="{% block og_description %}Stroopwafel ile aylık gelir kazanabileceğiniz profesyonel yatırım platformu.{% endblock %}" />
  <meta property="og:image" content="{% static 'images/og-image.png' %}" />
  <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri|slice:":-1" }}{% endblock %}" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{% block twitter_title %}WafelInvest{% endblock %}" />
  <meta name="twitter:description" content="{% block twitter_description %}Stroopwafel ile akıllı yatırım deneyimi!{% endblock %}" />
  <meta name="twitter:image" content="{% static 'images/og-image.png' %}" />

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "WafelInvest",
    "url": "{{ request.build_absolute_uri|slice:":-1" }}",
    "logo": "{% static 'images/favicon.png' %}",
    "sameAs": [],
    "description": "Stroopwafel ile yatırım ve pasif gelir platformu"
  }
  </script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
  <style>
    html, body {
      font-family: 'Inter', sans-serif;
      scroll-behavior: smooth;
      background-color: var(--background-light);
      color: var(--text-light);
      transition: background-color 0.3s, color 0.3s;
    }

    [data-theme="dark"] {
      --background-light: #121212;
      --text-light: #f8f9fa;
      --nav-bg: rgba(0,0,0,0.75);
    }

    nav.navbar {
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .navbar-shrink {
      padding-top: 0.4rem !important;
      padding-bottom: 0.4rem !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .theme-toggle {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: inherit;
    }

    footer {
      background: linear-gradient(90deg, #003973 0%, #E5E5BE 100%);
      color: white;
      padding: 1rem 0;
      font-size: 0.9rem;
      text-align: center;
    }

    .btn-gradient {
      background: linear-gradient(to right, #0d6efd, #6610f2);
      color: #fff;
      border: none;
      padding: 0.6rem 1.3rem;
      font-weight: 600;
      border-radius: 0.5rem;
      transition: all 0.25s ease;
    }

    .btn-gradient:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    @media (max-width: 768px) {
      .navbar-brand {
        font-size: 1.4rem;
      }
      .nav-link {
        font-size: 0.95rem;
      }
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body class="d-flex flex-column min-vh-100" data-barba="wrapper">

<nav class="navbar navbar-expand-lg navbar-light sticky-top" data-aos="fade-down">
  <div class="container-fluid px-4">
    <a class="navbar-brand d-flex align-items-center gap-2" href="{% url 'home' %}">
      <img src="{% static 'images/favicon.png' %}" alt="Logo" width="30" height="30" loading="lazy" />
      <span>WafelInvest</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Menüyü Aç/Kapat">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarContent">
      <ul class="navbar-nav align-items-center gap-2">
        <li class="nav-item"><a class="nav-link" href="{% url 'packages' %}">Paketler</a></li>

        {% if user.is_authenticated %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person-circle"></i> {{ user.first_name|default:user.username }}
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="{% url 'profile' %}">Profilim</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">Çıkış Yap</a></li>
          </ul>
        </li>
        {% else %}
        <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Giriş</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Kayıt Ol</a></li>
        {% endif %}

        <li class="nav-item">
          <button class="theme-toggle" id="themeToggle" aria-label="Tema Değiştir"><i class="bi bi-moon"></i></button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<main class="flex-grow-1 py-4" data-barba="container" data-barba-namespace="main">
  <div class="container" data-aos="fade-up">
    {% block content %}{% endblock %}
  </div>
</main>

<footer>
  © 2025 WafelInvest | Akıllı Yatırım Platformu
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous" defer></script>
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js" defer></script>
<script src="https://unpkg.com/@barba/core" defer></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js" defer></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    AOS.init({ once: true, duration: 700 });

    // Barba transitions
    barba.init({
      transitions: [{
        name: 'fade',
        leave(data) {
          return gsap.to(data.current.container, { opacity: 0, duration: 0.4 });
        },
        enter(data) {
          return gsap.from(data.next.container, { opacity: 0, duration: 0.4 });
        }
      }]
    });

    // Dark mode toggle
    const themeBtn = document.getElementById('themeToggle');
    const root = document.documentElement;
    let theme = localStorage.getItem('theme') || 'light';
    root.setAttribute('data-theme', theme);
    themeBtn.innerHTML = theme === 'dark' ? '<i class="bi bi-sun-fill"></i>' : '<i class="bi bi-moon-fill"></i>';

    themeBtn.addEventListener('click', () => {
      theme = theme === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      themeBtn.innerHTML = theme === 'dark' ? '<i class="bi bi-sun-fill"></i>' : '<i class="bi bi-moon-fill"></i>';
    });

    // Navbar shrink
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', () => {
      navbar.classList.toggle('navbar-shrink', window.scrollY > 50);
    });
  });
</script>

{% block extra_js %}{% endblock %}
</body>
</html>
