{% extends 'base.html' %}
{% block title %}YatÄ±rÄ±m Yap - {{ package.name }} | WafelInvest{% endblock %}

{% block meta_tags %}
<meta name="description" content="{{ package.description|default:'En iyi yatÄ±rÄ±m paketleri ile WafelInvest Ã¼zerinden gÃ¼venle yatÄ±rÄ±m yapÄ±n.' }}">
<meta name="keywords" content="yatÄ±rÄ±m, {{ package.name }}, sabit getiri, yatÄ±rÄ±m paketi, WafelInvest, stroopwafel yatÄ±rÄ±m">
<meta name="robots" content="index, follow">
<meta property="og:title" content="YatÄ±rÄ±m Yap - {{ package.name }} | WafelInvest">
<meta property="og:description" content="{{ package.description|default:'WafelInvest ile gÃ¼venli yatÄ±rÄ±m fÄ±rsatlarÄ±nÄ± keÅŸfedin.' }}">
<meta property="og:type" content="website">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row g-5 justify-content-center align-items-start">

    <!-- YatÄ±rÄ±m Formu -->
    <div class="col-12 col-md-10 col-lg-6">
      <div class="card p-4 p-md-5 shadow-sm border-0 rounded-4 bg-white h-100">
        <h2 class="text-center text-primary fw-bold mb-4">YatÄ±rÄ±m Yap</h2>

        <!-- Paket Bilgisi -->
        <div class="text-center mb-3">
          <span class="badge 
            {% if 'Basic' in package.name %}bg-success
            {% elif 'Premium' in package.name %}bg-warning text-dark
            {% elif 'Master' in package.name %}bg-danger
            {% else %}bg-secondary
            {% endif %}
            fs-5 px-4 py-2 rounded-pill">
            {{ package.name }} - â‚¬{{ package.price|floatformat:2 }}
          </span>
        </div>

        <!-- Getiri -->
        <div class="text-center mb-3">
          <span class="badge bg-info fs-6 px-3 py-2 rounded-pill">
            Getiri OranÄ±: {{ profit_percent|default:"Bilgi yok" }}%
          </span>
        </div>

        <!-- Paket AÃ§Ä±klamasÄ± -->
        <p class="text-muted small text-center mb-3 fst-italic">
          AÃ§Ä±klama: {{ description|default:"AÃ§Ä±klama yok" }}
        </p>

        <!-- SÃ¼re -->
        <p class="text-center mb-4">
          <strong>SÃ¼re:</strong> {{ duration|default:"Bilgi yok" }} gÃ¼n
        </p>

        <!-- SADECE TEK BÄ°R FORM OLMALI -->
        <form method="POST" enctype="multipart/form-data" novalidate>

          {% csrf_token %}
          {{ form.amount }}

          <div class="form-check form-switch mb-4">
            {{ form.agreement }}
            <label for="{{ form.agreement.id_for_label }}" class="form-check-label fw-semibold">
              YatÄ±rÄ±m koÅŸullarÄ±nÄ± okudum ve kabul ediyorum.
            </label>
          </div>

          <button type="submit" class="btn btn-gradient w-100 py-3 fw-bold rounded-pill shadow-sm" aria-label="YatÄ±rÄ±mÄ± Onayla">
            ğŸš€ YatÄ±rÄ±mÄ± Onayla
          </button>
        </form>
      </div>
    </div>

    <!-- Bilgilendirme Paneli -->
    <div class="col-12 col-md-10 col-lg-5">
      <div class="card p-4 bg-light shadow-sm border-0 rounded-4 h-100">
        <h4 class="fw-bold text-primary mb-4">YatÄ±rÄ±m Bilgilendirmesi</h4>

        <ul class="list-group list-group-flush mb-4">
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <i class="bi bi-clock text-secondary me-2 fs-5"></i> SÃ¼re
            <strong>{{ duration|default:"Bilgi yok" }} gÃ¼n</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <i class="bi bi-cash text-success me-2 fs-5"></i> Getiri
            <strong>{% if expected_return %} â‚¬{{ expected_return|floatformat:2 }} {% else %} Bilgi yok {% endif %}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <i class="bi bi-arrow-repeat text-warning me-2 fs-5"></i> Ä°ptal
            <strong>%30 kesintiyle iade</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <i class="bi bi-shield-lock text-primary me-2 fs-5"></i> GÃ¼venlik
            <strong>Manuel onaylÄ±</strong>
          </li>
        </ul>

        <!-- SSS -->
        <h5 class="fw-semibold text-primary mb-3">SÄ±kÃ§a Sorulan Sorular</h5>
        <div class="accordion" id="faqAccordion">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                Ã–deme dekontunu nasÄ±l gÃ¶ndereceÄŸim?
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                YatÄ±rÄ±m sonrasÄ± destek e-posta adresimize dekont gÃ¶ndererek sÃ¼reci baÅŸlatabilirsiniz.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                YatÄ±rÄ±m iptali durumunda ne olur?
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                Ä°lk 30 gÃ¼n iÃ§inde yapÄ±lan iptallerde yatÄ±rdÄ±ÄŸÄ±nÄ±z tutarÄ±n %70â€™i iade edilir.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                Getiriler ne zaman yatÄ±rÄ±lÄ±r?
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                Onaylanan yatÄ±rÄ±mlarÄ±nÄ±z iÃ§in getiriler 30 gÃ¼n sonunda hesabÄ±nÄ±za yansÄ±tÄ±lÄ±r.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<style>
  .btn-gradient {
    background: linear-gradient(90deg, #28a745, #218838);
    color: white;
    transition: all 0.3s ease-in-out;
  }

  .btn-gradient:hover, .btn-gradient:focus {
    background: linear-gradient(90deg, #218838, #1e7e34);
    box-shadow: 0 0.5rem 1rem rgba(33, 136, 56, 0.4);
    color: white;
  }

  .accordion-button::after {
    font-family: "bootstrap-icons" !important;
    content: "\f078" !important; /* down caret */
  }

  .accordion-button.collapsed::after {
    content: "\f077" !important; /* up caret */
  }

  @media (max-width: 768px) {
    .card {
      padding: 1.5rem !important;
    }
  }

  @media (max-width: 576px) {
    .card {
      padding: 1.2rem !important;
    }

    h2, h4, h5 {
      font-size: 1.25rem;
    }

    .btn {
      font-size: 1rem;
    }
  }
</style>
{% endblock %}
